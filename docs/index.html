<!DOCTYPE html><html class="default"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>sonification</title><meta name="description" content="Documentation for sonification"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="assets/style.css"/><link rel="stylesheet" href="assets/highlight.css"/><script async src="assets/search.js" id="search-script"></script></head><body><script>document.body.classList.add(localStorage.getItem("tsd-theme") || "os")</script><header><div class="tsd-page-toolbar"><div class="container"><div class="table-wrap"><div class="table-cell" id="tsd-search" data-base="."><div class="field"><label for="tsd-search-field" class="tsd-widget search no-caption">Search</label><input type="text" id="tsd-search-field"/></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="index.html" class="title">sonification</a></div><div class="table-cell" id="tsd-widgets"><div id="tsd-filter"><a href="#" class="tsd-widget options no-caption" data-toggle="options">Options</a><div class="tsd-filter-group"><div class="tsd-select" id="tsd-filter-visibility"><span class="tsd-select-label">All</span><ul class="tsd-select-list"><li data-value="public">Public</li><li data-value="protected">Public/Protected</li><li data-value="private" class="selected">All</li></ul></div> <input type="checkbox" id="tsd-filter-inherited" checked/><label class="tsd-widget" for="tsd-filter-inherited">Inherited</label><input type="checkbox" id="tsd-filter-externals" checked/><label class="tsd-widget" for="tsd-filter-externals">Externals</label></div></div><a href="#" class="tsd-widget menu no-caption" data-toggle="menu">Menu</a></div></div></div></div><div class="tsd-page-title"><div class="container"><h1> sonification</h1></div></div></header><div class="container container-main"><div class="row"><div class="col-8 col-content"><div class="tsd-panel tsd-typography">
<a href="#sonification" id="sonification" style="color: inherit; text-decoration: none;">
  <h1>Sonification</h1>
</a>
<p>The Physical computing Streaming Sensor Sonification Toolkit (PSSST) is designed to simplify the authoring of  sonification of live sensor data for the purposes of understanding, testing, and debugging sensors. The toolkit is designed more generally to support authoring across different types of streaming data, but has prioritized features that will specifically be helpful when dealing with multiple sensor data streams.</p>

<a href="#basic-usage" id="basic-usage" style="color: inherit; text-decoration: none;">
  <h2>Basic Usage</h2>
</a>
<p>We start with a simple example of how to use PSST. This example is a summary of what is done in <a href="https://github.com/make4all/sonification/blob/main/src/pages/Jacdac.tsx">Jacdac.tsx</a>. </p>
<ul>
<li>First get an instance of <a href="https://make4all.github.io/sonification/classes/sonification_OutputEngine.OutputEngine.html"><code>OutputEngine</code></a> using <a href="https://make4all.github.io/sonification/classes/sonification_OutputEngine.OutputEngine.html#getInstance"><code>OutputEngine.getInstance()</code></a> This method enforces that there is only ever one OutputEngine. The OutputEngine is the repository for all data sinks and their associated outputs.</li>
<li>Next, add a new <a href="https://make4all.github.io/sonification/classes/sonification_DataSink.DataSink.html"><code>DataSink</code></a> to the board, by calling <a href="https://make4all.github.io/sonification/classes/sonification_OutputEngine.OutputEngine.html#addSink"><code>board.addSink(&quot;name&quot;)</code></a>. </li>
<li>This <a href="https://make4all.github.io/sonification/classes/sonification_DataSink.DataSink.html"><code>DataSink</code></a> must be configured. <ul>
<li>To do this, we must add a <a href="https://make4all.github.io/sonification/classes/sonification_handler_DataHandler.DataHandler.html"><code>DataHandler</code></a> class which knows how to handle and potentially output the data. For example, in <a href="https://github.com/make4all/sonification/blob/main/src/pages/Jacdac.tsx"><code>Jacdac.tsx</code></a> we add a  <a href="https://make4all.github.io/sonification/classes/sonification_handler_NoteHandler.NoteHandler.html"><code>NoteHandler</code></a> to this sink, which will cause incoming data to be mapped into an audible range and then outputed as audible notes created using an oscillator. It is possible to add multilpe such handlers to a single sink.</li>
</ul>
</li>
</ul>
</li>
<li>Finlaly, the <a href="https://make4all.github.io/sonification/classes/sonification_OutputEngine.OutputEngine.html"><code>OutputEngine</code></a> must be started up, using <a href="https://make4all.github.io/sonification/classes/sonification_OutputEngine.OutputEngine.html#onPlay"><code>board.onPlay()</code></a></li>
</ul>
<p>This is the initial configuration, the only remaining step is to ensure that data is being delivered. There are currently two ways to do this. in <code>Jacdac.tsx</code> we use the <code>OutputEngine</code> to deliver data to a sink declaratively, by calling <a href="https://make4all.github.io/sonification/classes/sonification_OutputEngine.OutputEngine.html#pushPoint"><code>board.pushPoint(value, sinkId)</code></a>. The alternative (seen in <a href="https://github.com/make4all/sonification/blob/main/src/views/demos/DemoSimple.tsx">DemoSimple</a>) is to directly subscribe a sink to an rxjs stream by calling <code>setStream(sink : Observer&lt;Datum&gt;)</code> </p>
<p>Outputs and Handlers work together. For example, a <code>NoteHandler</code> will sonify incoming data as audible notes. If we also add a <code>FilterRangeHandler</code> with an attached <code>NoiseSonify</code> output, those notes that are inside the specified range will <em>additionally</em> play white noise. </p>
<p>That`s it. Add a sink, configure it with one or more handlers, and push data.  More details on all of this below. </p>

<a href="#the-outputengine-class" id="the-outputengine-class" style="color: inherit; text-decoration: none;">
  <h2>The OutputEngine class</h2>
</a>
<p>The <code>OutputEngine</code> class is designed to only ever have a single instance. This means that even as the user flips from one webpage to another there is still a way to keep outputs running (or turn them off, or change their volume). It also handles glabel needs like pausing the audio for all data sinks, generating a new data sink class with a unique ID as needed, adjusting overall volume (still TBD), and pushing a new data point to a specific stream declaritively. </p>

<a href="#the-datasink-class" id="the-datasink-class" style="color: inherit; text-decoration: none;">
  <h2>The DataSink class</h2>
</a>
<p>Data sinks are holders for a specific data sink. For the most part, our current implementation assumes each <code>DataSink</code> class will handle only a single sink of timestamped streaming numbers (specifically, streams containing the <a href="https://make4all.github.io/sonification/classes/sonification_Datum.Datum.html"><code>Datum</code></a> class.  As described above, streaming data can either be provided as an <a href="https://rxjs.dev/">Rxjs</a> <code>Observable</code> or through a call to <code>OutputEngine.pushPoint()</code>.</p>
<p>Data sinks have a list of <a href="https://make4all.github.io/sonification/modules/sonification_handler_DataHandler.DataHandler.html"><code>Handler</code></a> classes which handle incoming data. Handlers are described more in depth below, but they may filter data, calculate an adjusted value for data, and/or cause data to be outputed. They can be thought of as dispatch handlers for data. </p>
<p>The primary role of a <code>DataSink</code> is to handle incoming data. This is all done through data streaming at the time that DataHandlers are registered with the DataSink. Incoming data and information about the state of the sink (started, stopped, or paused) are both streamed to all handlers.</p>

<a href="#datum" id="datum" style="color: inherit; text-decoration: none;">
  <h1>Datum</h1>
</a>
<p>A <a href="https://make4all.github.io/sonification/classes/sonification_Datum.Datum.html"><code>Datum</code></a> is just a single item of a data stream. It knows which sink it is being handled by, and has a raw value, a timestamp, and an adjusted value. Some outputs may use the adjusted value instead of the raw value to decide how to render the Datum. </p>

<a href="#handlers" id="handlers" style="color: inherit; text-decoration: none;">
  <h1>Handlers</h1>
</a>
<p>A <code>DataHandler</code> should behave in the following ways</p>
<ul>
<li>It should handle data appropriately based on its mode, whether paused, playing or stopped</li>
<li>Possibly filter data, stopping it from reaching the next DataHandler in the chain, or the DataHandler's \textit{Output} display. </li>
<li>If relevant, it should output the <code>Datum</code>.
A handler may have one or more <a href="https://make4all.github.io/sonification/classes/sonification_output_DatumOutput.DatumOutput.html"><code>DatumOutput</code></a> classes which are used to render the <code>Datum</code>. As with everything else, these receive information through Rxjs, i.e. because they are subscribed to a stream (in this case the stream coming from the DataHandler). 
</ul>
<p>In addition, <code>Handlers</code> handle basic features such as adding and removing <code>DatumOutput</code> classes and <code>start()</code>, <code>stop()</code> and <code>pause()</code>.</p>
<p>Some examples may help to clarify how <code>Handler</code> classes work. </p>
<ul>
<li>The <a href="https://make4all.github.io/sonification/classes/sonification_handler_FilterRangeHandler.FilterRangeHandler.html"><code>FilterRangeHandler</code></a> causes data dispatch to stop if a data point is outside its specified range. Right now, this class supports only a single range with no intelligence, but more sophisticated filters could be imagined. If a output is attached to the <code>FilterRangeHandler</code>, it will call  <code>update()</code> on that output only when  the <code>Datum</code> is in range.</li>
<li>The <a href="https://make4all.github.io/sonification/classes/sonification_handler_ScaleHandler.ScaleHandler.html"><code>ScaleHandler</code></a> takes in a conversion function and uses it to modify <code>Datum.adjustedValue</code> for every point it sees. We subclass it in <a href="https://make4all.github.io/sonification/classes/sonification_handler_NoteHandler.NoteHandler.html"><code>NoteHandler</code></a> to parameterize it with a <a href="https://en.wikipedia.org/wiki/Mel_scale">Mel Scale</a> transformation.</li>
</ul>
<p>We haven&#39;t implemented all handlers. Some additional ones that we are thinking of adding:</p>
<ul>
<li><em>SlopeHandler</em> would keep track of the the slope between data points and then assign an adjusted value on that basis. An alternative version might store the parity of the slope.</li>
</ul>

<a href="#outputs" id="outputs" style="color: inherit; text-decoration: none;">
  <h1>Outputs</h1>
</a>
<p>The same output can be used by more than one handler. We currently include only outputs that sonify data with nonspeech audio, though we plan to add a speech output. They all inheret from <a href="https://make4all.github.io/sonification/classes/sonification_output_Sonify.Sonify.html"><code>Sonify</code></a>, which in turn inherets from <code>DatumOutput</code>. We currently support the following</p>
<ul>
<li><a href="https://make4all.github.io/sonification/classes/sonification_output_NoteSonify.NoteSonify.html"><code>NoteSonify</code></a> which uses <code>Datum.adjustedValue</code> as a frequency for an oscillator. It plays data continuously and only stops when the data stream ends on <code>stop()</code> is called.</li>
<li><a href="https://make4all.github.io/sonification/classes/sonification_output_NoiseSonify.NoiseSonify.html"><code>NoiseSonify</code></a>, which inherets from <a href="https://make4all.github.io/sonification/classes/sonification_output_SonifyFixedDuration.SonifyFixedDuration.html"><code>SonifyFixedDuration</code></a> and creates white noise when a <code>Datum</code> is passed to it.</li>
</ul>

<a href="#statistics" id="statistics" style="color: inherit; text-decoration: none;">
  <h1>Statistics</h1>
</a>
<p>Currently the only implemented statistic is a <code>RunningAverage</code>. However we have discussed other ideas for statistics such as  an <code>Extreme</code> (could keep track of outliers in the data stream)</p>
</div></div><div class="col-4 col-menu menu-sticky-wrap menu-highlight"><nav class="tsd-navigation primary"><ul><li class="current"><a href="modules.html">Modules</a></li><li class=" tsd-kind-module"><a href="modules/pages_Index.html">pages/<wbr/>Index</a></li><li class=" tsd-kind-module"><a href="modules/sonification_DataSink.html">sonification/<wbr/>Data<wbr/>Sink</a></li><li class=" tsd-kind-module"><a href="modules/sonification_Datum.html">sonification/<wbr/>Datum</a></li><li class=" tsd-kind-module"><a href="modules/sonification_OutputConstants.html">sonification/<wbr/>Output<wbr/>Constants</a></li><li class=" tsd-kind-module"><a href="modules/sonification_OutputEngine.html">sonification/<wbr/>Output<wbr/>Engine</a></li><li class=" tsd-kind-module"><a href="modules/sonification_handler_DataHandler.html">sonification/handler/<wbr/>Data<wbr/>Handler</a></li><li class=" tsd-kind-module"><a href="modules/sonification_handler_FilterRangeHandler.html">sonification/handler/<wbr/>Filter<wbr/>Range<wbr/>Handler</a></li><li class=" tsd-kind-module"><a href="modules/sonification_handler_NoteHandler.html">sonification/handler/<wbr/>Note<wbr/>Handler</a></li><li class=" tsd-kind-module"><a href="modules/sonification_handler_ScaleHandler.html">sonification/handler/<wbr/>Scale<wbr/>Handler</a></li><li class=" tsd-kind-module"><a href="modules/sonification_output_DatumOutput.html">sonification/output/<wbr/>Datum<wbr/>Output</a></li><li class=" tsd-kind-module"><a href="modules/sonification_output_NoiseSonify.html">sonification/output/<wbr/>Noise<wbr/>Sonify</a></li><li class=" tsd-kind-module"><a href="modules/sonification_output_NoteSonify.html">sonification/output/<wbr/>Note<wbr/>Sonify</a></li><li class=" tsd-kind-module"><a href="modules/sonification_output_Sonify.html">sonification/output/<wbr/>Sonify</a></li><li class=" tsd-kind-module"><a href="modules/sonification_output_SonifyFixedDuration.html">sonification/output/<wbr/>Sonify<wbr/>Fixed<wbr/>Duration</a></li><li class=" tsd-kind-module"><a href="modules/sonification_stat_RangeEndExpander.html">sonification/stat/<wbr/>Range<wbr/>End<wbr/>Expander</a></li><li class=" tsd-kind-module"><a href="modules/sonification_stat_StatObserver.html">sonification/stat/<wbr/>Stat<wbr/>Observer</a></li><li class=" tsd-kind-module"><a href="modules/sonification_stat_Statistic.html">sonification/stat/<wbr/>Statistic</a></li></ul></nav></div></div></div><footer class="with-border-bottom"><div class="container"><h2>Legend</h2><div class="tsd-legend-group"><ul class="tsd-legend"><li class="tsd-kind-variable"><span class="tsd-kind-icon">Variable</span></li><li class="tsd-kind-function"><span class="tsd-kind-icon">Function</span></li><li class="tsd-kind-type-alias"><span class="tsd-kind-icon">Type alias</span></li></ul><ul class="tsd-legend"><li class="tsd-kind-enum"><span class="tsd-kind-icon">Enumeration</span></li></ul><ul class="tsd-legend"><li class="tsd-kind-class"><span class="tsd-kind-icon">Class</span></li></ul></div><h2>Settings</h2><p>Theme <select id="theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></p></div></footer><div class="container tsd-generator"><p>Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></div><div class="overlay"></div><script src="assets/main.js"></script></body></html>
